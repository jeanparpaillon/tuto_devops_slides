name: Auto-assign Copilot to Issues

on:
  issues:
    types: [opened]

permissions:
  issues: write
  contents: read
  pull-requests: write

jobs:
  assign-copilot:
    runs-on: ubuntu-latest
    steps:
      - name: Assign Copilot to issue
        uses: actions/github-script@v7
        with:
          script: |
            const issue_number = context.issue.number;
            const owner = context.repo.owner;
            const repo = context.repo.repo;
            
            // Add a comment mentioning copilot
            await github.rest.issues.createComment({
              owner: owner,
              repo: repo,
              issue_number: issue_number,
              body: '@copilot Please analyze this issue and route it to the appropriate specialized agent (designer, coder, project manager, or trainer).'
            });
            
            // Add label to track copilot-managed issues
            await github.rest.issues.addLabels({
              owner: owner,
              repo: repo,
              issue_number: issue_number,
              labels: ['copilot-managed']
            });
